# Java 21 GraalVM + Java Native Interface (JNI) using SWIG

This repository contains an example of a shared library implemented in C, JNI interface generated by SWIG, and a Java application compiled into native application using JDK 21's GraalVM.

 - Environment
    - Ubuntu 22.04.3 LTS
    - GCC 11.4.0
    - GraalVM for JDK 21.0.1
    - Gradle 8.5
    - Swig 4.0.2

- Generate JNI interface
    ```
    swig -package com.example -outdir app/src/main/java/com/example -doxygen -java hello.i
    ```
- Compile `libhello.so` library
    ```
    gcc -I$JAVA_HOME/include -I$JAVA_HOME/include/linux -c hello.c hello_wrap.c
    gcc -shared -o libhello.so
    ```
- Compile and run Java application with Gradle
    ```
    ./gradlew run
    ```
- Compile with GraalVM native-image tool and run native application with Gradle
    ```
    ./gradlew nativeRun
    ```
- Install the distribution (native application and shared library) into `app/build/install/nativeApp`
    ```
    ./gradlew installNativeAppDist
    ```
- Run native application
   ```
   ./app/build/install/nativeApp/app
   ```
